{"version":3,"file":"test-metadata.js","sources":["../src/test-metadata.ts"],"sourcesContent":["import type { BaseContext } from './setup-context';\n\nclass TestMetadata {\n  [key: string]: any;\n  testName?: string;\n  setupTypes: string[];\n  usedHelpers: string[];\n\n  constructor() {\n    this.setupTypes = [];\n    this.usedHelpers = [];\n  }\n\n  get isRendering() {\n    return (\n      this.setupTypes.indexOf('setupRenderingContext') > -1 &&\n      this.usedHelpers.indexOf('render') > -1\n    );\n  }\n\n  get isApplication() {\n    return this.setupTypes.indexOf('setupApplicationContext') > -1;\n  }\n}\n\nexport {\n  // Exported only for testing purposes.\n  TestMetadata as __TestMetadata,\n};\n\n// Only export the type side of the item: this way the only way (it is legal) to\n// construct it is here, but users can still reference the type.\nexport type {\n  /**\n   * A non-user-constructible interface representing the metadata associated\n   * with a test, designed for test frameworks to use e.g. with their reporters.\n   */\n  TestMetadata,\n};\n\nconst TEST_METADATA = new WeakMap<BaseContext, TestMetadata>();\n\n/**\n * Gets the test metadata associated with the provided test context. Will create\n * a new test metadata object if one does not exist.\n *\n * @param {BaseContext} context the context to use\n * @returns {TestMetadata} the test metadata for the provided context\n */\nexport default function getTestMetadata(context: BaseContext): TestMetadata {\n  if (!TEST_METADATA.has(context)) {\n    TEST_METADATA.set(context, new TestMetadata());\n  }\n\n  return TEST_METADATA.get(context)!;\n}\n"],"names":["TestMetadata","testName","setupTypes","usedHelpers","constructor","isRendering","indexOf","isApplication","TEST_METADATA","WeakMap","getTestMetadata","context","has","set","get"],"mappings":"AAEA,MAAMA,YAAY,CAAC;EAEjBC,QAAQ,CAAA;EACRC,UAAU,CAAA;EACVC,WAAW,CAAA;AAEXC,EAAAA,WAAWA,GAAG;IACZ,IAAI,CAACF,UAAU,GAAG,EAAE,CAAA;IACpB,IAAI,CAACC,WAAW,GAAG,EAAE,CAAA;AACvB,GAAA;EAEA,IAAIE,WAAWA,GAAG;IAChB,OACE,IAAI,CAACH,UAAU,CAACI,OAAO,CAAC,uBAAuB,CAAC,GAAG,CAAC,CAAC,IACrD,IAAI,CAACH,WAAW,CAACG,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAA;AAE3C,GAAA;EAEA,IAAIC,aAAaA,GAAG;IAClB,OAAO,IAAI,CAACL,UAAU,CAACI,OAAO,CAAC,yBAAyB,CAAC,GAAG,CAAC,CAAC,CAAA;AAChE,GAAA;AACF,CAAA;;AAOA;AACA;;AASA,MAAME,aAAa,GAAG,IAAIC,OAAO,EAA6B,CAAA;;AAE9D;AACA;AACA;AACA;AACA;AACA;AACA;AACe,SAASC,eAAeA,CAACC,OAAoB,EAAgB;AAC1E,EAAA,IAAI,CAACH,aAAa,CAACI,GAAG,CAACD,OAAO,CAAC,EAAE;IAC/BH,aAAa,CAACK,GAAG,CAACF,OAAO,EAAE,IAAIX,YAAY,EAAE,CAAC,CAAA;AAChD,GAAA;AAEA,EAAA,OAAOQ,aAAa,CAACM,GAAG,CAACH,OAAO,CAAC,CAAA;AACnC;;;;"}