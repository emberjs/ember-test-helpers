{"version":3,"file":"-logging.js","sources":["../../src/dom/-logging.ts"],"sourcesContent":["import type { Target } from './-target';\n\n/**\n * Logs a debug message to the console if the `testHelperLogging` query\n * parameter is set.\n *\n * @private\n * @param {string} helperName Name of the helper\n * @param {string|Element} target The target element or selector\n */\nexport function log(helperName: string, target: Target, ...args: any[]) {\n  if (loggingEnabled()) {\n    // eslint-disable-next-line no-console\n    console.log(\n      `${helperName}(${[elementToString(target), ...args.filter(Boolean)].join(\n        ', ',\n      )})`,\n    );\n  }\n}\n\n/**\n * Returns whether the test helper logging is enabled or not via the\n * `testHelperLogging` query parameter.\n *\n * @private\n * @returns {boolean} true if enabled\n */\nfunction loggingEnabled(): boolean {\n  return (\n    typeof location !== 'undefined' &&\n    location.search.indexOf('testHelperLogging') !== -1\n  );\n}\n\n/**\n * This generates a human-readable description to a DOM element.\n *\n * @private\n * @param {*} el The element that should be described\n * @returns {string} A human-readable description\n */\nexport function elementToString(el: unknown) {\n  let desc: string;\n  if (el instanceof NodeList) {\n    if (el.length === 0) {\n      return 'empty NodeList';\n    }\n    desc = Array.prototype.slice.call(el, 0, 5).map(elementToString).join(', ');\n    return el.length > 5 ? `${desc}... (+${el.length - 5} more)` : desc;\n  }\n  if (!(el instanceof HTMLElement || el instanceof SVGElement)) {\n    return String(el);\n  }\n\n  desc = el.tagName.toLowerCase();\n  if (el.id) {\n    desc += `#${el.id}`;\n  }\n  if (el.className && !(el.className instanceof SVGAnimatedString)) {\n    desc += `.${String(el.className).replace(/\\s+/g, '.')}`;\n  }\n  Array.prototype.forEach.call(el.attributes, function (attr: Attr) {\n    if (attr.name !== 'class' && attr.name !== 'id') {\n      desc += `[${attr.name}${attr.value ? `=\"${attr.value}\"]` : ']'}`;\n    }\n  });\n  return desc;\n}\n"],"names":["log","helperName","target","args","loggingEnabled","console","elementToString","filter","Boolean","join","location","search","indexOf","el","desc","NodeList","length","Array","prototype","slice","call","map","HTMLElement","SVGElement","String","tagName","toLowerCase","id","className","SVGAnimatedString","replace","forEach","attributes","attr","name","value"],"mappings":"AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,GAAGA,CAACC,UAAkB,EAAEC,MAAc,EAAE,GAAGC,IAAW,EAAE;EACtE,IAAIC,cAAc,EAAE,EAAE;AACpB;IACAC,OAAO,CAACL,GAAG,CACT,CAAGC,EAAAA,UAAU,CAAI,CAAA,EAAA,CAACK,eAAe,CAACJ,MAAM,CAAC,EAAE,GAAGC,IAAI,CAACI,MAAM,CAACC,OAAO,CAAC,CAAC,CAACC,IAAI,CACtE,IACF,CAAC,CAAA,CAAA,CACH,CAAC,CAAA;AACH,GAAA;AACF,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASL,cAAcA,GAAY;AACjC,EAAA,OACE,OAAOM,QAAQ,KAAK,WAAW,IAC/BA,QAAQ,CAACC,MAAM,CAACC,OAAO,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,CAAA;AAEvD,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASN,eAAeA,CAACO,EAAW,EAAE;AAC3C,EAAA,IAAIC,IAAY,CAAA;EAChB,IAAID,EAAE,YAAYE,QAAQ,EAAE;AAC1B,IAAA,IAAIF,EAAE,CAACG,MAAM,KAAK,CAAC,EAAE;AACnB,MAAA,OAAO,gBAAgB,CAAA;AACzB,KAAA;IACAF,IAAI,GAAGG,KAAK,CAACC,SAAS,CAACC,KAAK,CAACC,IAAI,CAACP,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAACQ,GAAG,CAACf,eAAe,CAAC,CAACG,IAAI,CAAC,IAAI,CAAC,CAAA;AAC3E,IAAA,OAAOI,EAAE,CAACG,MAAM,GAAG,CAAC,GAAG,CAAGF,EAAAA,IAAI,CAASD,MAAAA,EAAAA,EAAE,CAACG,MAAM,GAAG,CAAC,CAAA,MAAA,CAAQ,GAAGF,IAAI,CAAA;AACrE,GAAA;EACA,IAAI,EAAED,EAAE,YAAYS,WAAW,IAAIT,EAAE,YAAYU,UAAU,CAAC,EAAE;IAC5D,OAAOC,MAAM,CAACX,EAAE,CAAC,CAAA;AACnB,GAAA;AAEAC,EAAAA,IAAI,GAAGD,EAAE,CAACY,OAAO,CAACC,WAAW,EAAE,CAAA;EAC/B,IAAIb,EAAE,CAACc,EAAE,EAAE;AACTb,IAAAA,IAAI,IAAI,CAAA,CAAA,EAAID,EAAE,CAACc,EAAE,CAAE,CAAA,CAAA;AACrB,GAAA;EACA,IAAId,EAAE,CAACe,SAAS,IAAI,EAAEf,EAAE,CAACe,SAAS,YAAYC,iBAAiB,CAAC,EAAE;AAChEf,IAAAA,IAAI,IAAI,CAAA,CAAA,EAAIU,MAAM,CAACX,EAAE,CAACe,SAAS,CAAC,CAACE,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAE,CAAA,CAAA;AACzD,GAAA;AACAb,EAAAA,KAAK,CAACC,SAAS,CAACa,OAAO,CAACX,IAAI,CAACP,EAAE,CAACmB,UAAU,EAAE,UAAUC,IAAU,EAAE;IAChE,IAAIA,IAAI,CAACC,IAAI,KAAK,OAAO,IAAID,IAAI,CAACC,IAAI,KAAK,IAAI,EAAE;AAC/CpB,MAAAA,IAAI,IAAI,CAAImB,CAAAA,EAAAA,IAAI,CAACC,IAAI,GAAGD,IAAI,CAACE,KAAK,GAAG,KAAKF,IAAI,CAACE,KAAK,CAAI,EAAA,CAAA,GAAG,GAAG,CAAE,CAAA,CAAA;AAClE,KAAA;AACF,GAAC,CAAC,CAAA;AACF,EAAA,OAAOrB,IAAI,CAAA;AACb;;;;"}