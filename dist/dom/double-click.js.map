{"version":3,"file":"double-click.js","sources":["../../src/dom/double-click.ts"],"sourcesContent":["import { getWindowOrElement } from './-get-window-or-element.ts';\nimport fireEvent from './fire-event.ts';\nimport { __focus__ } from './focus.ts';\nimport settled from '../settled.ts';\nimport { DEFAULT_CLICK_OPTIONS } from './click.ts';\nimport { isWindow, type Target } from './-target.ts';\nimport { log } from './-logging.ts';\nimport isFormControl from './-is-form-control.ts';\nimport { runHooks, registerHook } from '../helper-hooks.ts';\nimport getDescription from './-get-description.ts';\n\nregisterHook('doubleClick', 'start', (target: Target) => {\n  log('doubleClick', target);\n});\n\n/**\n  @private\n  @param {Element} element the element to double-click on\n  @param {MouseEventInit} options the options to be merged into the mouse events\n  @returns {Promise<Event | void>} resolves when settled\n*/\nexport function __doubleClick__(\n  element: Element | Document | Window,\n  options: MouseEventInit,\n): Promise<Event | void> {\n  return Promise.resolve()\n    .then(() => fireEvent(element, 'mousedown', options))\n    .then((mouseDownEvent) => {\n      return !isWindow(element) && !mouseDownEvent?.defaultPrevented\n        ? __focus__(element)\n        : Promise.resolve();\n    })\n    .then(() => fireEvent(element, 'mouseup', options))\n    .then(() => fireEvent(element, 'click', options))\n    .then(() => fireEvent(element, 'mousedown', options))\n    .then(() => fireEvent(element, 'mouseup', options))\n    .then(() => fireEvent(element, 'click', options))\n    .then(() => fireEvent(element, 'dblclick', options));\n}\n\n/**\n  Double-clicks on the specified target.\n\n  Sends a number of events intending to simulate a \"real\" user clicking on an\n  element.\n\n  For non-focusable elements the following events are triggered (in order):\n\n  - `mousedown`\n  - `mouseup`\n  - `click`\n  - `mousedown`\n  - `mouseup`\n  - `click`\n  - `dblclick`\n\n  For focusable (e.g. form control) elements the following events are triggered\n  (in order):\n\n  - `mousedown`\n  - `focus`\n  - `focusin`\n  - `mouseup`\n  - `click`\n  - `mousedown`\n  - `mouseup`\n  - `click`\n  - `dblclick`\n\n  The exact listing of events that are triggered may change over time as needed\n  to continue to emulate how actual browsers handle clicking a given element.\n\n  Use the `options` hash to change the parameters of the [MouseEvents](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/MouseEvent).\n\n  @public\n  @param {string|Element|IDOMElementDescriptor} target the element, selector, or descriptor to double-click on\n  @param {MouseEventInit} _options the options to be merged into the mouse events\n  @return {Promise<void>} resolves when settled\n\n  @example\n  <caption>\n    Emulating double clicking a button using `doubleClick`\n  </caption>\n\n  doubleClick('button');\n\n  @example\n  <caption>\n    Emulating double clicking a button and pressing the `shift` key simultaneously using `click` with `options`.\n  </caption>\n\n  doubleClick('button', { shiftKey: true });\n*/\nexport default function doubleClick(\n  target: Target,\n  _options: MouseEventInit = {},\n): Promise<void> {\n  const options = { ...DEFAULT_CLICK_OPTIONS, ..._options };\n\n  return Promise.resolve()\n    .then(() => runHooks('doubleClick', 'start', target, _options))\n    .then(() => {\n      if (!target) {\n        throw new Error(\n          'Must pass an element, selector, or descriptor to `doubleClick`.',\n        );\n      }\n\n      const element = getWindowOrElement(target);\n      if (!element) {\n        const description = getDescription(target);\n        throw new Error(\n          `Element not found when calling \\`doubleClick('${description}')\\`.`,\n        );\n      }\n\n      if (isFormControl(element) && element.disabled) {\n        throw new Error(`Can not \\`doubleClick\\` disabled ${element}`);\n      }\n\n      return __doubleClick__(element, options).then(settled);\n    })\n    .then(() => runHooks('doubleClick', 'end', target, _options));\n}\n"],"names":["registerHook","target","log","__doubleClick__","element","options","Promise","resolve","then","fireEvent","mouseDownEvent","isWindow","defaultPrevented","__focus__","doubleClick","_options","DEFAULT_CLICK_OPTIONS","runHooks","Error","getWindowOrElement","description","getDescription","isFormControl","disabled","settled"],"mappings":"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"}